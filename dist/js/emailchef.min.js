"use strict";var WC_Emailchef=function(n){var a=wcec.namespace;return{settings:function(){n(document).on("click","#emailchef-disconnect",function(e){e.preventDefault(),confirm(wcec.disconnect_confirm)&&n.post(wcec.ajax_disconnect_url,{},function(e){e.success?window.location.reload():alert(e.data.message)})}),n(document).on("click","#wc_emailchef_create_list",function(e){e.preventDefault(),n(".ecwc-new-list-container").toggle()}),n(document).on("click","#wc_emailchef_sync_now",function(e){n.post(wcec.ajax_manual_sync_url,{},function(e){location.reload()})}),n(document).on("click",".ecwc-new-list-container .woocommerce-undo-button",function(e){e.preventDefault(),n(".ecwc-new-list-container").hide()}),n(document).on("click",".ecwc-new-list-container .woocommerce-save-button",function(e){var t;e.preventDefault(),n(this).attr("disabled","disabled"),e=n("#"+a+"_new_name").val(),t=n("#"+a+"_new_description").val(),n(".ecwc-new-list-container button").attr("disabled","disabled"),n.post(wcec.ajax_add_list_url,{data:{list_name:e,list_desc:t}},function(e){var t;n(".ecwc-new-list-container button").removeAttr("disabled"),e.success?(n(".ecwc-new-list-container").hide(),t=e.data.list_id,n(".ecwc-new-list-container button").attr("disabled","disabled"),n.post(wcec.ajax_lists_url,{},function(e){var c;e.success?(c=[],n.each(e.data.lists,function(e,t){c.push({text:t,id:e})}),n("#"+a+"_list").empty().select2({data:c}),n("#"+a+"_list").val(t).trigger("change")):alert(e.data.message)})):alert(e.data.message)})});var e=document.getElementById("showPassword"),t=document.getElementById("hidePassword"),c=document.getElementById(a+"_consumer_secret");e&&e.addEventListener("click",function(){c.setAttribute("type","text"),e.style.display="none",t.style.display="flex"});t&&t.addEventListener("click",function(){c.setAttribute("type","password"),e.style.display="flex",t.style.display="none"})},debugPage:function(){n(document).on("click","#emailchef-button-move-abandoned-carts",function(e){e.preventDefault();e=wcec.ajax_debug_move_abandoned_carts_url;n.post(e,{},function(e){e.success?(console.log("Abandoned carts moved successfully"),location.reload()):alert(e.data.message)})}),n(document).on("click",".emailchef-button-force-sync",function(e){e.preventDefault();var e=n(this).data("user-id"),t=wcec.ajax_sync_abandoned_carts_url;n.post(t,{only_userid:e},function(e){e.success?(console.log("Abandoned cart synced successfully"),location.reload()):alert(e.data.message)})}),n(document).on("click","#emailchef-button-rebuild-customfields",function(e){e.preventDefault();e=wcec.ajax_debug_rebuild_customfields_url;n.post(e,{},function(e){e.success?(console.log("Recover custom fields successfully"),location.reload()):alert(e.data.message)})})}}}(jQuery);